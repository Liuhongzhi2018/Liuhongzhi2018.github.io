---
layout: post
title: NTIRE 2020 Challenge on Spectral Reconstruction from an RGB Image
date: 2020-10-23 23:00:00 +0800
description: You’ll find this post in your `_posts` directory. Go ahead and edit it and re-build the site to see your changes. # Add post description (optional)
img: software.jpg # Add image post (optional)
tags: [Productivity, Software] # add tag
---

题目：NTIRE 2020 挑战赛从RGB图像的光谱重建

NTIRE（New Trends in Image Restoration and Enhancement），即图像恢复与增强的新趋势。NTIRE 2020 Challenge 知乎
NTIRE 2020 webpage:
https://data.vision.ee.ethz.ch/cvl/ntire20/

摘要
本文回顾了第二次从RGB图像进行光谱重建的挑战赛，即从RGB三通道图像中恢复全场景高光谱（HS）信息。与上一次挑战赛一样，提供了两条赛道：（i）“Clean”赛道，其中从无噪声的RGB估计HS图像，RGB图像本身使用真实的高光谱HS图像和提供的光谱灵敏度函数进行数值计算；（ ii）“Real World”赛道，模拟未经校准和未知相机的捕获，其中高光谱HS图像是从含噪声的JPEG压缩RGB图像中恢复的。本次挑战赛提出了一个新的，比以往更大的自然高光谱图像数据集，其中包含总共510张HS图像。“Clean”和“Real World”赛道分别有103名和78名注册参与者，在最后的测试阶段有14个团队竞争。而且提供了对提出方法的说明，以及挑战评分和对最佳方法的广泛评估。他们评估了从RGB图像进行光谱重建的最新技术。

1. 简介
虽然传统的彩色摄像机记录场景光谱辐射集成了三个光谱波段（红色、绿色和蓝色），但高光谱成像系统 （HIS） 可以在一组较窄的光谱波段上记录实际场景光谱 [14]。然而，HIS 提供的丰富的光谱信息具有显著的附加捕获复杂性：最常见的 HIS 依赖于空间或光谱扫描（例如推扫或可变滤波器系统），因此不适合实时操作。此外，高光谱捕获通常需要较长的捕获时间，这意味着很难测量来自具有移动内容的场景的信息。虽然，“快照”HIS的最新进展继续缩小在实时光谱图像采集方面的差距，例如马赛克 [54、21、23] 和基于光场 [11] 的快照 HIS 能够以视频速率捕获图像 - 这些技术以降低空间和光谱分辨率来记录图像。迄今为止，扫描和快照 HIS 对于消费者级使用来说仍然非常昂贵（“低成本”HIS 通常在 1 万到 10 万美元的范围内）。

[14] C.-I. Chang. Hyperspectral data exploitation: theory and applications. John Wiley & Sons, 2007.

由于HIS的这些缺点，改进方法从低成本和普遍存在的RGB图像中恢复光谱，已经引起了许多研究和行业的兴趣。RGB 光谱重建图像的早期工作利用稀疏编码方法恢复 HS 数据 [6，46，2，55]。近年来，基于神经网络的方法越来越普遍 [19， 13， 29， 7， 51， 50， 31， 49]， 从NTIRE 2018 光谱恢复挑战赛 [7， 49] 的领先方法以及最近的工作 [65， 37， 29， 16] 采用这种方法。这种向基于神经网络方法的过渡突出了对更大数据集的需要，这既有助于改进训练，也需要改进评估。后一种考虑至关重要，因为神经网络容易在小型数据集上"过度拟合"，因此它们的测试分数可能无法很好地概括到实际应用。

Yi-Tun和Fin-layson [33]最近强调了评估基于神经网络的解决方案的固有困难，他们在可变照明条件下评估了NTIRE 2018挑战赛中表现最佳的解决方案。 令人惊讶的是，简单地改变输入图像的亮度（模拟同一场景的更长或更短的相机曝光）会降低基于神经网络的方法的性能，它们是优于基于稀疏编码的方法（因为评估的基于稀疏编码的方法是曝光不变）。 相应地，在第3节中，我们介绍了对性能最高的方法的扩展评估（包括可变曝光测试），以更全面地评估算法的性能。

在 NTIRE 2018 之后，确定了两个潜在的实验评估问题，并在此进行了处理。首先，NTIRE 2018 挑战赛中性能最佳的方法获得了大约 1% 的百分比恢复误差，即平均相对绝对误差 （MRAE; c.f .第2.2节和Eq.1），指出评价数据可能需要比BGU HS数据集[6]目前提供的“动态范围”更好的“动态范围”，或者评价应超越目前使用的31个波段的光谱量化水平。其次，发现在上一个挑战中算法的排名在干净轨道和真实轨道之间没有显着差异，这可能表明模拟的“真实世界”摄像机相对于干净轨道没有增加足够的复杂性。为此，2020 年的挑战赛提供了比 BGU HS 数据集大近两倍的数据集（c.f 第 2.1 节） ，以及改进的real world赛道，其中相机噪音也纳入其中（c.f .第 2.2 节）

2. NTIRE 2020 Challenge
RGB到光谱恢复挑战[9]是NTIRE 2020挑战之一。 其他挑战包括：去模糊[40]，非均匀除雾[5]，感知极端超分辨率[63]，视频质量映射[18]，真实图像去噪[1]，真实世界超分辨率[35]和去摩尔纹 [60]（摩尔纹是一种在数码照相机或者扫描仪等设备上，感光元件出现的高频干扰的条纹，是一种会使图片出现彩色的高频率不规则的条纹）。

与NTIRE 2018光谱恢复挑战赛[7]一样，NTIRE 2020光谱重构挑战赛的目标是：（i）衡量和改进从RGB图像进行HS重建的最新技术； （ii）比较不同的光谱恢复方法； （iii）进一步扩大可供研究界使用的自然HS图像数量。 重要的是，2020年挑战赛不仅引入了新的和经过改进的数据集，还引入了扩展评估，该评估试图衡量挑战赛的测试图像范围之外所提出方法的预期性能。

2.1 ARAD HS 数据集
NTIRE 2020光谱重建挑战赛提供了一个新的比以往更大的自然高光谱图像数据集。该数据集包括总共510张图像：450张训练图像，30张验证图像和30张测试图像。挑战赛期间发布了训练和测试图像，而测试图像则保持机密，以方便对未来作品进行盲目评估。图1包括来自数据集的一组样本图像。

ARAD数据集是通过Specim IQ移动高光谱相机收集的。 Specim IQ相机是一个独立的，电池供电的推扫式光谱成像系统，其大小与传统SLR相机（207×91×74 mm）相同，无需外部电源或计算机即可独立运行控制器。这种紧凑的移动系统的使用有助于收集具有多种场景和主题的极其多样化的数据集。

除了ARAD数据集外，还邀请参与者使用以前发布的BGU HS数据集[6，7]，以获取总共706张训练图像。

2.1.1 辐射校准
Specim IQ 摄像机提供 RAW 512 × 512px 图像，400-1000nm 范围内有 204 个光谱波段。为了解决这一挑战，已将制造商提供的辐射度校准应用于 RAW 图像，并将图像重新采样到可见范围（400-700nm）内的 31 个光谱波段。RAW和经过辐射校准的图像均已提供给研究人员。

辐射校准校正了相机系统CMOS传感器引入的测量偏差，将记录的每通道RAW强度数据转换为准确的光谱测量值。 通过此过程还可以去除干扰严重的“线”（图像列），从而生成482×512px图像，并以10nm的步长重新采样到从400nm到700nm的31个波段。

2.2 赛道
与上一次挑战赛[7]一样，NTIRE 2020光谱恢复挑战也有两个赛道，即“Clean”赛道和“Real World”赛道。 尽管clean赛道与之前的挑战赛（NITRE 2018）相似，但真实世界的赛道已得到实质性更新，以提供对物理摄像头系统的更准确的模拟。

赛道1：“Real World”模拟从未知，未经校准的摄像机中恢复光谱信息。 为参与者提供了压缩的JPEG格式的8位彩色图像，这些图像是通过对光谱图像应用以下过程创建的：
1.将real-world现实世界的相机响应功能应用于光谱图像。
2.对所得的3通道图像进行二次采样以生成RGGB Bayer马赛克图像。
3.将模拟的相机噪声（泊松散粒噪声和正态分布的暗噪声）添加到马赛克图像。
4.应用来自OpenCV [12]库的去马赛克算法来生成三通道RGB图像。
5.以压缩的JPEG格式存储图像。

上述程序中使用的相机响应和噪声参数已对挑战参与者保密，并且应保密，以利于将来的工作与以下挑战结果进行平等的比较。

向挑战者提供了代码[8]（可在GitHub平台上公开获得），该代码用于生成clean和real world赛道图像。 比赛比赛在CodaLab平台上举办，每个赛道都有单独的比赛。 注册后，参与者可以访问数据并提交结果以在竞赛测试服务器上进行自动评估。 由于CodaLab平台的限制，每个轨道的验证和测试集已减少到10张图像（总共10张验证图像和20张测试图像）。 挑战阶段挑战分为两个阶段：

开发：为参与者提供了两条赛道的真值训练高光谱/ RGB图像对（每条轨道450幅图像对）以及10幅RGB图像进行验证。 参与者可以使用测试服务器，使他们可以上传结果并获得在线评估分数。
测试：发布了真值光谱验证图像以及每个赛道的最终测试图像。 邀请参与者将最终解决方案上载到测试服务器，并对结果保密，直到挑战结束。
评估约定。 与2018年的比赛[7]一样，在提交的重建结果和真值图像之间计算的平均相对绝对误差（MRAE）被选为比赛的量化指标。 均方根误差（RMSE）也将报告，但未用于对结果进行排名。 MRAE和RMSE计算如下：
MRAE=\frac{\sum_{i,c}\frac{|P_{gtic}-P_{recic}|}{P_{gtic}}}{|P_{gt}|}
RMSE=\sqrt{\frac{\sum_{i,c}(P_{gtic}-P_{recic})^2}{|P_{gt}|}}
其中P_{gtic}和P_{recic}分别表示真值图像和重建图像中第i个像素的光谱通道c的值，|P_{gt}| 是真值图像的大小（像素数×光谱通道数）
